{"version":3,"file":"index.umd.js","sources":["../src/index.ts"],"sourcesContent":["import * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { compute, FidanValue } from \"@fidanjs/runtime\";\n\nexport const reactToDom = <T>(\n  Tag,\n  attributes: {\n    [key in keyof T]:\n      | FidanValue<typeof attributes[key]>\n      | typeof attributes[key]\n  },\n  ...childs: any[]\n) => {\n  const parent = document.createElement(\"template\");\n\n  const RenderWrapper = class extends React.Component {\n    state = {};\n    dynamics = [];\n    componentDidMount() {\n      const props = this.props;\n\n      compute(() => {\n        var newState = {};\n        for (var key in this.props) {\n          if (\n            typeof props[key] === \"function\" &&\n            props[key].hasOwnProperty(\"$val\")\n          ) {\n            newState[key] = props[key]();\n          }\n        }\n        this.setState(newState);\n      }, this.dynamics);\n    }\n    constructor(props) {\n      super(props);\n      for (var key in props) {\n        if (\n          typeof props[key] === \"function\" &&\n          props[key].hasOwnProperty(\"$val\")\n        ) {\n          this.dynamics.push(props[key]);\n          this.state[key] = props[key]();\n        } else this.state[key] = props[key];\n      }\n    }\n    render() {\n      return React.createElement(Tag, this.state, ...childs);\n    }\n  };\n  ReactDOM.render(React.createElement(RenderWrapper, attributes), parent);\n  return parent.firstElementChild;\n};\n\nexport const domToReact = (dom: DocumentFragment) => {\n  const integrationDomRef = (element: HTMLTemplateElement) => {\n    if (element) {\n      element.replaceWith(dom.cloneNode(true));\n    }\n  };\n\n  return React.createElement(\n    React.Fragment,\n    {},\n    React.createElement(\"template\", {\n      ref: integrationDomRef\n    })\n  );\n};\n"],"names":["reactToDom","Tag","attributes","parent","document","createElement","RenderWrapper","props","key","hasOwnProperty","dynamics","push","state","componentDidMount","compute","newState","this","setState","render","React","childs","ReactDOM","firstElementChild","domToReact","dom","integrationDomRef","element","replaceWith","cloneNode","ref"],"mappings":";;;;;MAIaA,UAAU,aACrBC,GADwB,EAExBC,UAFwB;;;;QASlBC,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAf;QAEMC,aAAa;6BAmBLC;8BACJA,KAAN;kBAnBF,GAAQ,EAAR;qBACA,GAAW,EAAX;;aAmBO,IAAIC,GAAT,IAAgBD,KAAhB,EAAuB;cAEnB,OAAOA,KAAK,CAACC,GAAD,CAAZ,KAAsB,UAAtB,IACAD,KAAK,CAACC,GAAD,CAAL,CAAWC,cAAX,CAA0B,MAA1B,CAFF,EAGE;iBACKC,QAAL,CAAcC,IAAd,CAAmBJ,KAAK,CAACC,GAAD,CAAxB;iBACKI,KAAL,CAAWJ,GAAX,IAAkBD,KAAK,CAACC,GAAD,CAAL,EAAlB;WALF,QAMO,KAAKI,KAAL,CAAWJ,GAAX,IAAkBD,KAAK,CAACC,GAAD,CAAvB;;;;;;;;8BAzBXK;;;YACQN,KAAK,GAAG,KAAKA,KAAnB;QAEAO,eAAO;cACDC,QAAQ,GAAG,EAAf;;eACK,IAAIP,GAAT,IAAgBQ,OAAKT,KAArB,EAA4B;gBAExB,OAAOA,KAAK,CAACC,GAAD,CAAZ,KAAsB,UAAtB,IACAD,KAAK,CAACC,GAAD,CAAL,CAAWC,cAAX,CAA0B,MAA1B,CAFF,EAGE;cACAM,QAAQ,CAACP,GAAD,CAAR,GAAgBD,KAAK,CAACC,GAAD,CAAL,EAAhB;;;;iBAGCS,QAAL,CAAcF,QAAd;SAVK,EAWJ,KAAKL,QAXD,CAAP;;;8BAyBFQ;eACSC,yBAAA,UAAoBlB,GAApB,EAAyB,KAAKW,KAA9B,WAAwCQ,QAAxC,CAAP;;;;uBAhCJ;IAmCAC,eAAA,CAAgBF,mBAAA,CAAoBb,aAApB,EAAmCJ,UAAnC,CAAhB,EAAgEC,MAAhE;WACOA,MAAM,CAACmB,iBAAd;GA/CK;AAkDP,MAAaC,UAAU,aAAIC;QACnBC,iBAAiB,aAAIC;UACrBA,OAAJ,EAAa;QACXA,OAAO,CAACC,WAAR,CAAoBH,GAAG,CAACI,SAAJ,CAAc,IAAd,CAApB;;KAFJ;;WAMOT,mBAAA,CACLA,cADK,EAEL,EAFK,EAGLA,mBAAA,CAAoB,UAApB,EAAgC;MAC9BU,GAAG,EAAEJ;KADP,CAHK,CAAP;GAPK;;;;;;;;;"}